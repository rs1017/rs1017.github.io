
# Error Log Analyzer

애플리케이션 로그 파일에서 에러를 자동으로 추출하고, 패턴을 분석하며, 발생 빈도와 원인을 파악하여 해결 방안을 제시하는 스킬입니다.

## 주요 기능

- **에러 자동 추출**: 다양한 로그 형식에서 에러 메시지 파싱
- **패턴 분석**: 반복되는 에러 패턴 식별 및 그룹화
- **통계 생성**: 에러 유형별 발생 빈도 집계
- **근본 원인 분석**: 스택 트레이스 및 컨텍스트 분석
- **해결책 제안**: 일반적인 에러에 대한 해결 방안 제시
- **시각화 리포트**: 마크다운 형식의 분석 리포트 생성

## 사용 시점

이 스킬은 다음과 같은 상황에서 사용됩니다:

- 프로덕션 환경에서 장애가 발생했을 때
- 로그 파일에서 반복되는 에러 패턴을 찾고 싶을 때
- 에러의 우선순위를 파악하고 싶을 때
- 디버깅을 위해 에러 발생 추이를 분석하고 싶을 때

## 사용 방법

### 1. 스킬 호출

```
로그 파일을 분석해주세요: /path/to/app.log
```

또는

```
최근 에러 로그를 분석하고 리포트를 생성해주세요
```

### 2. 분석 프로세스

스킬은 다음 단계로 작동합니다:

1. **로그 파일 탐지**: 프로젝트 내 로그 파일 자동 검색
2. **에러 추출**: ERROR, FATAL, Exception 등의 키워드로 에러 식별
3. **파싱**: 타임스탬프, 로그 레벨, 메시지, 스택 트레이스 추출
4. **그룹화**: 유사한 에러를 패턴별로 그룹화
5. **분석**: 발생 빈도, 시간대, 영향도 분석
6. **리포트 생성**: 마크다운 형식의 분석 결과 생성

## 지원 형식

### 로그 형식
- **표준 로그**: `[timestamp] LEVEL: message`
- **Java/Spring**: `yyyy-MM-dd HH:mm:ss.SSS [thread] LEVEL class - message`
- **Node.js**: `{"level":"error","message":"...","timestamp":"..."}`
- **Python**: `ERROR:root:message\nTraceback...`
- **Nginx/Apache**: Combined/Common 로그 형식

### 출력 형식
- 마크다운 리포트 (`.md`)
- JSON 구조화 데이터 (선택)
- CSV 통계 데이터 (선택)

## 분석 리포트 구조

생성되는 리포트는 다음 섹션을 포함합니다:

```markdown
# 에러 로그 분석 리포트

## 📊 요약
- 분석 기간: ...
- 총 에러 수: ...
- 고유 에러 패턴: ...
- 가장 빈번한 에러: ...

## 🔥 상위 에러 패턴

### 1. NullPointerException (45건)
- 발생 위치: `UserService.java:123`
- 첫 발생: 2026-01-22 09:15:23
- 마지막 발생: 2026-01-22 11:42:10
- 원인 분석: user 객체가 null일 때 getName() 호출
- 해결 방안: null 체크 추가 또는 Optional 사용

## 📈 시간대별 분석
(시간대별 발생 빈도 차트)

## 💡 권장 조치사항
1. 우선순위 High: ...
2. 우선순위 Medium: ...
```

## 설정 옵션

스킬 실행 시 다음 옵션을 지정할 수 있습니다:

```yaml
# 분석 옵션
time_range: "24h"           # 분석 기간 (1h, 24h, 7d 등)
min_occurrences: 2          # 리포트에 포함할 최소 발생 횟수
severity_filter: ["ERROR", "FATAL"]  # 분석할 로그 레벨
output_format: "markdown"   # markdown, json, csv
include_stacktrace: true    # 스택 트레이스 포함 여부
```

## 예시

### 입력
```
error-log-analyzer를 실행해서 app.log를 분석해주세요
```

### 출력
```markdown
# 에러 로그 분석 리포트
Generated: 2026-01-22 12:30:00

## 📊 요약
- 분석 파일: app.log (15.2 MB)
- 분석 기간: 2026-01-21 12:00 ~ 2026-01-22 12:00
- 총 로그 라인: 234,567
- 에러 로그: 128건
- 고유 에러 패턴: 8개

## 🔥 상위 에러 패턴

### 1. Database Connection Timeout (52건, 40.6%)
**메시지**: `Connection timeout after 30000ms`
**발생 위치**: `DatabasePool.java:89`
**시간대**: 주로 09:00-10:00, 14:00-15:00

**원인 분석**:
- DB 커넥션 풀 고갈
- 피크 타임 동시 접속 급증

**해결 방안**:
1. 커넥션 풀 크기 증가 (현재 20 → 50 권장)
2. 커넥션 타임아웃 조정 (30s → 60s)
3. 사용하지 않는 커넥션 조기 반환 로직 추가

### 2. NullPointerException (31건, 24.2%)
...

## 📈 시간대별 분석
00:00-03:00: ▁ (2건)
03:00-06:00: ▁ (1건)
06:00-09:00: ▃ (15건)
09:00-12:00: ▇ (52건)
12:00-15:00: ▅ (28건)
15:00-18:00: ▃ (18건)
18:00-21:00: ▂ (8건)
21:00-24:00: ▁ (4건)

## 💡 권장 조치사항

### 🚨 긴급 (24시간 내)
- DB 커넥션 풀 설정 조정

### ⚠️ 중요 (1주일 내)
- Null 체크 로직 추가 (UserService, OrderService)
- 에러 핸들링 개선 (API Gateway)

### 📌 일반
- 로그 레벨 최적화 (DEBUG 로그 과다)
```

## 확장 가능성

이 스킬은 다음과 같이 확장할 수 있습니다:

- **알림 연동**: Slack, Email로 긴급 에러 알림
- **대시보드**: 실시간 에러 모니터링 대시보드 생성
- **머신러닝**: 이상 패턴 자동 감지
- **자동 이슈 생성**: GitHub/Jira 이슈 자동 등록
- **로그 집계**: 여러 서버의 로그 통합 분석

## 관련 스킬

- `log-query-builder`: 로그 검색 쿼리 자동 생성
- `performance-log-analyzer`: 성능 로그 분석
- `api-error-tracker`: API 에러 추적 및 분석
